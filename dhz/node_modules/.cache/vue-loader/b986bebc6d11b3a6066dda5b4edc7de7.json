{"remainingRequest":"D:\\MyObject\\Travel-log\\dhz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyObject\\Travel-log\\dhz\\src\\views\\Mylv.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyObject\\Travel-log\\dhz\\src\\views\\Mylv.vue","mtime":1606491652187},{"path":"D:\\MyObject\\Travel-log\\dhz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605537519619},{"path":"D:\\MyObject\\Travel-log\\dhz\\node_modules\\babel-loader\\lib\\index.js","mtime":1605537519037},{"path":"D:\\MyObject\\Travel-log\\dhz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605537519619},{"path":"D:\\MyObject\\Travel-log\\dhz\\node_modules\\vue-loader\\lib\\index.js","mtime":1605537543923}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBhcnQ6e30sDQogICAgICB2YWx1ZTogNSwNCiAgICAgIGxlbWU6IiIsDQogICAgICAvLyDnqbpmb3JtZGF0YQ0KICAgICAgZm9ybWRhdGE6IHt9LA0KICAgICAgLy8g5b2T5YmN5pel5b+XaWQNCiAgICAgIGppZDowLA0KICAgICAgLy8g5b2T5YmN55So5oi3DQogICAgICB1c2VyUGhvbmU6dGhpcy4kc3RvcmUuc3RhdGUudXNlclBob25lLA0KICAgICAgLy8g6K+E6K66DQogICAgICBjb21tZW50czpbXSwNCiAgICAgIC8vIOWktOWDj+aYvuekug0KICAgICAgYXZhdGFyOnRydWUsDQogICAgICBsaXN0TG9hZGluZzp0cnVlDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g5aS0ICANCiAgICAvLyBvbkNsaWNrTGVmdCgpIHsNCiAgICAvLyAgIFRvYXN0KCfov5Tlm54nKTsNCiAgICAvLyB9LA0KICAgIC8vIG9uQ2xpY2tSaWdodCgpIHsNCiAgICAvLyAgIFRvYXN0KCfmjInpkq4nKTsNCiAgICAvLyB9LA0KDQogICAgcHV0KCl7DQogICAgICAvLyBsZXQgZnJvbURhdGEgPSBuZXcgRm9ybURhdGEoKTsgDQogICAgICAvL+iOt+WPlueZu+W9leeKtuaAgQ0KICAgICAgbGV0IGlzT25sb2dpbiA9IHRoaXMuJHN0b3JlLnN0YXRlLmlzT25sb2dpbjsNCg0KICAgICAgLy/pqozor4HnmbvlvZUNCiAgICAgIC8vIOetieS6jjHnmbvlvZUNCiAgICAgIGlmKGlzT25sb2dpbiA9PSAxKXsNCg0KDQogICAgICAgIC8v5aaC5p6c5b2T5YmN5YaF5a655piv56m65o+Q5LqkDQogICAgICAgIGlmKCF0aGlzLmxlbWUpew0KICAgICAgICAgIC8vIHRoaXMuJHRvYXN0LmZhaWwoJ+ivt+i+k+WFpeivhOiuuuWGjeaPkOS6pH5+Jyk7DQogICAgICAgICAgcmV0dXJuDQoNCiAgICAgICAgfWVsc2V7IC8vIOaPkOS6pA0KDQogICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5sZW1lKTsNCiAgICAgICAgICAvLyDojrflj5bml7bpl7QNCiAgICAgICAgICBsZXQgbmV3X3RpbWUgPSB0aGlzLm1vbWVudCgpLmZvcm1hdCgneCcpOw0KICAgICAgICAgIHRoaXMuZm9ybWRhdGEudGltZSA9IG5ld190aW1lOw0KICAgICAgICAgIA0KICAgICAgICAgIC8v5aaC5p6c5aGr5YaZ5bCx5L+d5a2Y5ZyoZm9ybWRhdGHkuK0NCiAgICAgICAgICB0aGlzLmZvcm1kYXRhLmNvbW1lbnQgPSB0aGlzLmxlbWU7DQoNCiAgICAgICAgICAvLyDojrflj5blvZPliY3ml6Xlv5dpZA0KICAgICAgICAgIHRoaXMuZm9ybWRhdGEuam91cm5hbF9pZCA9IHRoaXMuamlkOw0KDQogICAgICAgICAgLy8g55So5oi3DQogICAgICAgICAgdGhpcy5mb3JtZGF0YS5waG9uZSA9IHRoaXMudXNlclBob25lLnBob25lOw0KICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlOw0KICAgICAgICAgIC8v5o+Q5Lqk6K+E6K66DQogICAgICAgICAgdGhpcy5heGlvcy5wb3N0KCcvam91cm5hbC9jb21tZW50Jyx0aGlzLmZvcm1kYXRhKS50aGVuKHJlcz0+ew0KICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOw0KICAgICAgICAgICAgaWYocmVzLmRhdGEuY29kZSA9PSAxKXsNCiAgICAgICAgICAgICAgdGhpcy4kdG9hc3Quc3VjY2Vzcygn6K+E6K665oiQ5YqfJyk7DQogICAgICAgICAgICAgIHRoaXMubGVtZSA9ICIiOw0KICAgICAgICAgICAgICB0aGlzLmdldExpc3QoIHRoaXMuamlkICk7DQogICAgICAgICAgICAgIC8vIHRoaXMucmVsb2FkKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KDQogICAgICB9IGVsc2UgeyAvLyDmnKrnmbvlvZUNCg0KICAgICAgICB0aGlzLiR0b2FzdC5mYWlsKCfor7fnmbvlvZXlkI7lj5HpgIEnKTsNCiAgICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOw0KICAgICAgfQ0KICAgICAvLw0KDQogICAgfSwNCiAgICBnZXRMaXN0KCBpZCApew0KICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlOw0KICAgIMKgwqB0aGlzLmF4aW9zLmdldCgnL2pvdXJuYWwvQWxsX2NvbW1lbnRzP2lkPScgKyBpZCApLnRoZW4ocmVzPT57DQogICAgICAgIHRoaXMuY29tbWVudHMgPSByZXMuZGF0YS5jb21tZW50czsNCiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEuY29tbWVudHMpOw0KICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQ0KICDCoMKgwqDCoH0pDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCl7DQogICAgDQogwqDCoCBsZXTCoGlkwqA9wqB0aGlzLiRyb3V0ZS5wYXJhbXMuYWlkOw0KICAgIC8vIOi1i+WAvOe7mWppZA0KICAgIHRoaXMuamlkID0gaWQ7DQogwqDCoMKgwqAvL+iOt+WPluacjeWKoeWZqOepv+eahGlk5YC8DQrCoMKgwqAgdGhpcy5heGlvcy5nZXQoJy9qb3VybmFsL2RldGFpbHM/aWQ9JytpZCkudGhlbihyZXM9PnsNCiAgICAgIHRoaXMuYXJ0PXJlcy5kYXRhLmFydDsNCiAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLmFydCk7DQrCoMKgwqDCoH0pDQoNCiAgICAvL+ivhOiuug0KLy8gICDCoMKgdGhpcy5heGlvcy5nZXQoJy9qb3VybmFsL0FsbF9jb21tZW50cz9pZD0nICsgaWQgKS50aGVuKHJlcz0+ew0KLy8gICAgICAgdGhpcy5jb21tZW50cyA9IHJlcy5kYXRhLmNvbW1lbnRzOw0KLy8gICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEuY29tbWVudHMpOw0KLy8gwqDCoMKgwqB9KQ0KICAgIHRoaXMuZ2V0TGlzdCggaWQgKTsNCsKgwqB9DQp9DQo="},{"version":3,"sources":["Mylv.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Mylv.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"mylv\">\r\n    <!-- 头 -->\r\n        <div >\r\n        <van-nav-bar  class=\"head\" :title=\"art.journal_title\" fixed\r\n        left-text=\"\" >\r\n        <template #left>\r\n          <router-link to=\"/\">\r\n            <van-icon class=\"jian\" name=\"arrow-left\" size=\"24\"/>\r\n          </router-link>\r\n        </template>\r\n        \r\n        </van-nav-bar>\r\n        </div>\r\n\r\n         <!-- 文章开始 -->\r\n        <!-- 开头中间分隔内容 -->\r\n        <div class=\"topf\">\r\n          <div class=\"topf2\">\r\n          <van-grid direction=\"horizontal\" :column-num=\"1\">\r\n          <van-grid-item text=\"_____.Q&A._____\" />\r\n          </van-grid>\r\n          </div>\r\n          <van-grid direction=\"horizontal\" :column-num=\"1\">\r\n          <van-grid-item :text=\"`【`+ art.journal_title +`】`\" />\r\n          </van-grid>\r\n        </div> \r\n        <!-- 问题 -->\r\n        <!-- 第一篇 -->\r\n        <div class=\"story\">\r\n        <van-grid :border=\"false\" :column-num=\"1\">\r\n         <!-- <van-loading type=\"spinner\" /> -->\r\n            <!-- <van-image :src=\"'http://127.0.0.1:8888/avatar/' + art.avatar\" lazy-load/> -->\r\n             \r\n              <!-- <van-image src=\"http://127.0.0.1:8888/avatar/bf6d72c1-db6f-448b-8f1a-0a6c576ea115.jpg\" /> -->\r\n            \r\n            <!-- <van-loading type=\"spinner\" /> -->\r\n            <van-grid-item :text=\"art.content\" />\r\n            <div class=\"imgBg\">\r\n              <div v-for=\"(pic,index) of art.pics\" :key=\"index\">\r\n                <van-image :src=\"'http://127.0.0.1:8888/journal-pic/' + pic.picture_pic\"\r\n                lazy-load\r\n                width=\"99%\"\r\n                height=\"10rem\"\r\n                fit=\"cover\"\r\n                />\r\n              </div>\r\n            </div>\r\n        </van-grid>\r\n        </div>\r\n        <!-- 评价 -->\r\n            \r\n        \r\n        <!-- 评论区 -->\r\n        <div class=\"topf\">\r\n          <van-grid direction=\"horizontal\" :column-num=\"1\">\r\n          <van-grid-item text=\"----- 评论 -----\" />\r\n          </van-grid>\r\n        </div>\r\n\r\n        <!-- 用户评论 -->\r\n        <div class=\"comment_area\">\r\n          <form action=\"\">\r\n          <van-field\r\n          v-model=\"leme\"\r\n          colon\r\n          rows=\"3\"\r\n          autosize\r\n          label=\"留言\"\r\n          label-width=\"2.5em\"\r\n          type=\"textarea\"\r\n          maxlength=\"300\"\r\n          placeholder=\"请输入您留言吧！\"\r\n          show-word-limit\r\n          >\r\n          <template #button >\r\n            <van-button round square class=\"btn\" type=\"warning\" color=\"#5ABCC8\" @click=\"put\">发送</van-button>\r\n          </template>\r\n          </van-field>\r\n          </form>\r\n        </div>\r\n\r\n        <!-- 评论区 -->\r\n        <!-- 组件懒加载 -->\r\n        <lazy-component v-if=\"listLoading\">\r\n        <div class=\"story\" v-for=\"(item,index) of comments\" :key=\"index\">\r\n          <van-grid :border=\"false\" :column-num=\"1\">\r\n          <!-- 日志标题开始 -->\r\n          <div class=\"comment-header\">\r\n            <van-image :round=\"avatar\" width=\"3rem\" :src=\"'http://127.0.0.1:8888/avatar/'+ item.avatar\" fit=\"cover\" class=\"comment-Img\"/>\r\n            <div class=\"commentMsg\">\r\n              <div>\r\n                <span>{{item.nickname}}</span>\r\n                <!-- <h3 class=\"articleItem-time\">{{this.moment.unix(diary.log_time).format('Y年MM月DD日')}}</h3> -->\r\n                <h3 class=\"comment-time\">{{item.time/1000 | datefmt('YYYY-MM-DD')}}</h3>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <p class=\"comment-content\">{{item.comment}}</p>\r\n            <!-- <van-grid-item :text=\"item.comment\" /> -->\r\n          <!-- 日志标题结束 -->\r\n          </van-grid>\r\n        </div>\r\n        </lazy-component>\r\n\r\n        <!-- 分割线 -->\r\n        <van-divider dashed\r\n          :style=\"{ color: '#fff', borderColor: '#fff', padding: '0px 16px 16px' }\"\r\n        >\r\n          已经到底了\r\n        </van-divider>\r\n        <!-- <div class=\"putf\">\r\n          <van-button round type=\"info\" size=\"small\" color=\"#5ABCC8\" @click=\"put\">发送</van-button>\r\n        </div> -->\r\n  </div>\r\n  \r\n</template>\r\n\r\n<script>\r\nexport default {\r\n   data() {\r\n    return {\r\n      art:{},\r\n      value: 5,\r\n      leme:\"\",\r\n      // 空formdata\r\n      formdata: {},\r\n      // 当前日志id\r\n      jid:0,\r\n      // 当前用户\r\n      userPhone:this.$store.state.userPhone,\r\n      // 评论\r\n      comments:[],\r\n      // 头像显示\r\n      avatar:true,\r\n      listLoading:true\r\n    }\r\n  },\r\n  methods: {\r\n    // 头  \r\n    // onClickLeft() {\r\n    //   Toast('返回');\r\n    // },\r\n    // onClickRight() {\r\n    //   Toast('按钮');\r\n    // },\r\n\r\n    put(){\r\n      // let fromData = new FormData(); \r\n      //获取登录状态\r\n      let isOnlogin = this.$store.state.isOnlogin;\r\n\r\n      //验证登录\r\n      // 等于1登录\r\n      if(isOnlogin == 1){\r\n\r\n\r\n        //如果当前内容是空提交\r\n        if(!this.leme){\r\n          // this.$toast.fail('请输入评论再提交~~');\r\n          return\r\n\r\n        }else{ // 提交\r\n\r\n          // console.log(this.leme);\r\n          // 获取时间\r\n          let new_time = this.moment().format('x');\r\n          this.formdata.time = new_time;\r\n          \r\n          //如果填写就保存在formdata中\r\n          this.formdata.comment = this.leme;\r\n\r\n          // 获取当前日志id\r\n          this.formdata.journal_id = this.jid;\r\n\r\n          // 用户\r\n          this.formdata.phone = this.userPhone.phone;\r\n          this.listLoading = true;\r\n          //提交评论\r\n          this.axios.post('/journal/comment',this.formdata).then(res=>{\r\n            console.log(res.data);\r\n            if(res.data.code == 1){\r\n              this.$toast.success('评论成功');\r\n              this.leme = \"\";\r\n              this.getList( this.jid );\r\n              // this.reload();\r\n            }\r\n            this.listLoading = false;\r\n          })\r\n        }\r\n\r\n      } else { // 未登录\r\n\r\n        this.$toast.fail('请登录后发送');\r\n        // this.$router.push(\"/login\");\r\n      }\r\n     //\r\n\r\n    },\r\n    getList( id ){\r\n      this.listLoading = false;\r\n      this.axios.get('/journal/All_comments?id=' + id ).then(res=>{\r\n        this.comments = res.data.comments;\r\n        console.log(res.data.comments);\r\n        this.listLoading = true\r\n      })\r\n    }\r\n  },\r\n  mounted(){\r\n    \r\n    let id = this.$route.params.aid;\r\n    // 赋值给jid\r\n    this.jid = id;\r\n     //获取服务器穿的id值\r\n    this.axios.get('/journal/details?id='+id).then(res=>{\r\n      this.art=res.data.art;\r\n      console.log(res.data.art);\r\n    })\r\n\r\n    //评论\r\n//     this.axios.get('/journal/All_comments?id=' + id ).then(res=>{\r\n//       this.comments = res.data.comments;\r\n//       console.log(res.data.comments);\r\n//     })\r\n    this.getList( id );\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.mylv .topf{\r\n  margin-top: 16px;\r\n}\r\n.mylv .dian {\r\n    display: flex;\r\n    flex-direction: row;\r\n}\r\n\r\n#zan,\r\n#cai {\r\n    width: 55px;\r\n    height: 22px;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    background-color: #F3F3F3;\r\n    margin: 0 10px;\r\n    border-radius: 6px;\r\n    user-select: none;\r\n    cursor: pointer;\r\n}\r\n\r\n#zan img,\r\n#cai img {\r\n    width: 14px;\r\n    height: 14px;\r\n    margin: 5px 5px 0 5px;\r\n}\r\n\r\n#zan #num1,\r\n#cai #num2 {\r\n    line-height: 22px;\r\n    margin-right: 3px;\r\n}\r\n  .mylv .head{\r\n    background-color: #5ABCC8; \r\n  }\r\n .mylv .van-nav-bar__title {\r\n   padding-top:0.50rem;\r\n    color:aliceblue;\r\n    \r\n}\r\n.mylv .story .van-grid-item__text{\r\n  font-size: 16px;\r\n  text-indent: 2em;\r\n  line-height: 26px;\r\n}\r\n .mylv .van-nav-bar .zan{\r\n   padding-top:0.50rem;\r\n   color: aliceblue\r\n }\r\n .mylv .van-nav-bar .jian{\r\n   padding-top:0.75rem;\r\n   color: aliceblue\r\n }\r\n  .mylv{\r\n    background-color:lightsteelblue;\r\n  }\r\n  .mylv .story{\r\n    padding: 3% 3% 1%;\r\n    font-size:0.5em;\r\n  }\r\n  .mylv .story + .story{\r\n    padding: 1% 3% 1%;\r\n  }\r\n  .mylv .story van-image {\r\n    border-radius: 5%\r\n  }\r\n .mylv .topf .van-grid-item__text{\r\n    font-size: 20px; \r\n  }\r\n  .mylv .topf .topf2 .van-grid-item__content{\r\n    padding: 0% \r\n  }\r\n  .mylv .van-grid-item__content{\r\n    background-color:lavender;\r\n  }\r\n  .mylv .story .comment-header{\r\n    font-weight: 500;\r\n    font-size: 16px;\r\n    color: #1a1a1a;\r\n    line-height: 16px;\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n    background: #fff;\r\n    width: 100%;\r\n  }\r\n  .mylv .story .van-grid-item__content{\r\n    background: #fff;\r\n  }\r\n  .mylv .story .commentMsg{\r\n    width: 100%;\r\n    margin-top: 15px;\r\n  }\r\n  .mylv .story .comment-time{\r\n    padding-right: 15px;\r\n  }\r\n  .mylv .story .comment-Img{\r\n    padding: 15px;\r\n  }\r\n  .mylv .story .comment-Img img{\r\n    border: 1px solid #5ABCC8;\r\n  }\r\n  .mylv .story .commentMsg span{\r\n    color: #5ABCC8;\r\n    font-weight: bold;\r\n  }\r\n  .mylv .story .comment-time{\r\n    font-size: 14px;\r\n    color: #999;\r\n  }\r\n  .mylv .story .commentMsg div{\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n    justify-content: space-between;\r\n  }\r\n  .mylv .story .comment-content{\r\n    display: block;\r\n    width: 100%;\r\n    background: #fff;\r\n    margin: 0;\r\n    padding: 10px 15px;\r\n    font-size: 16px;\r\n    line-height: 24px;\r\n    font-size: 14px;\r\n  }\r\n  .mylv .story .imgBg{\r\n    background: #fff;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n  }\r\n  .mylv .story .imgBg div{\r\n    width: 50%;\r\n  }\r\n</style>\r\n"]}]}