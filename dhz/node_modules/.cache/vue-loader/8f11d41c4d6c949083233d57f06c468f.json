{"remainingRequest":"D:\\MyObject\\Travel-log\\dhz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyObject\\Travel-log\\dhz\\src\\views\\Mylv.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\MyObject\\Travel-log\\dhz\\src\\views\\Mylv.vue","mtime":1606491652187},{"path":"D:\\MyObject\\Travel-log\\dhz\\node_modules\\css-loader\\dist\\cjs.js","mtime":1605537524090},{"path":"D:\\MyObject\\Travel-log\\dhz\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1605537543925},{"path":"D:\\MyObject\\Travel-log\\dhz\\node_modules\\postcss-loader\\src\\index.js","mtime":1605537534774},{"path":"D:\\MyObject\\Travel-log\\dhz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605537519619},{"path":"D:\\MyObject\\Travel-log\\dhz\\node_modules\\vue-loader\\lib\\index.js","mtime":1605537543923}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoubXlsdiAudG9wZnsNCiAgbWFyZ2luLXRvcDogMTZweDsNCn0NCi5teWx2IC5kaWFuIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7DQp9DQoNCiN6YW4sDQojY2FpIHsNCiAgICB3aWR0aDogNTVweDsNCiAgICBoZWlnaHQ6IDIycHg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBmbGV4LWRpcmVjdGlvbjogcm93Ow0KICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjNGM0YzOw0KICAgIG1hcmdpbjogMCAxMHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgICB1c2VyLXNlbGVjdDogbm9uZTsNCiAgICBjdXJzb3I6IHBvaW50ZXI7DQp9DQoNCiN6YW4gaW1nLA0KI2NhaSBpbWcgew0KICAgIHdpZHRoOiAxNHB4Ow0KICAgIGhlaWdodDogMTRweDsNCiAgICBtYXJnaW46IDVweCA1cHggMCA1cHg7DQp9DQoNCiN6YW4gI251bTEsDQojY2FpICNudW0yIHsNCiAgICBsaW5lLWhlaWdodDogMjJweDsNCiAgICBtYXJnaW4tcmlnaHQ6IDNweDsNCn0NCiAgLm15bHYgLmhlYWR7DQogICAgYmFja2dyb3VuZC1jb2xvcjogIzVBQkNDODsgDQogIH0NCiAubXlsdiAudmFuLW5hdi1iYXJfX3RpdGxlIHsNCiAgIHBhZGRpbmctdG9wOjAuNTByZW07DQogICAgY29sb3I6YWxpY2VibHVlOw0KICAgIA0KfQ0KLm15bHYgLnN0b3J5IC52YW4tZ3JpZC1pdGVtX190ZXh0ew0KICBmb250LXNpemU6IDE2cHg7DQogIHRleHQtaW5kZW50OiAyZW07DQogIGxpbmUtaGVpZ2h0OiAyNnB4Ow0KfQ0KIC5teWx2IC52YW4tbmF2LWJhciAuemFuew0KICAgcGFkZGluZy10b3A6MC41MHJlbTsNCiAgIGNvbG9yOiBhbGljZWJsdWUNCiB9DQogLm15bHYgLnZhbi1uYXYtYmFyIC5qaWFuew0KICAgcGFkZGluZy10b3A6MC43NXJlbTsNCiAgIGNvbG9yOiBhbGljZWJsdWUNCiB9DQogIC5teWx2ew0KICAgIGJhY2tncm91bmQtY29sb3I6bGlnaHRzdGVlbGJsdWU7DQogIH0NCiAgLm15bHYgLnN0b3J5ew0KICAgIHBhZGRpbmc6IDMlIDMlIDElOw0KICAgIGZvbnQtc2l6ZTowLjVlbTsNCiAgfQ0KICAubXlsdiAuc3RvcnkgKyAuc3Rvcnl7DQogICAgcGFkZGluZzogMSUgMyUgMSU7DQogIH0NCiAgLm15bHYgLnN0b3J5IHZhbi1pbWFnZSB7DQogICAgYm9yZGVyLXJhZGl1czogNSUNCiAgfQ0KIC5teWx2IC50b3BmIC52YW4tZ3JpZC1pdGVtX190ZXh0ew0KICAgIGZvbnQtc2l6ZTogMjBweDsgDQogIH0NCiAgLm15bHYgLnRvcGYgLnRvcGYyIC52YW4tZ3JpZC1pdGVtX19jb250ZW50ew0KICAgIHBhZGRpbmc6IDAlIA0KICB9DQogIC5teWx2IC52YW4tZ3JpZC1pdGVtX19jb250ZW50ew0KICAgIGJhY2tncm91bmQtY29sb3I6bGF2ZW5kZXI7DQogIH0NCiAgLm15bHYgLnN0b3J5IC5jb21tZW50LWhlYWRlcnsNCiAgICBmb250LXdlaWdodDogNTAwOw0KICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICBjb2xvcjogIzFhMWExYTsNCiAgICBsaW5lLWhlaWdodDogMTZweDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtd3JhcDogbm93cmFwOw0KICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgd2lkdGg6IDEwMCU7DQogIH0NCiAgLm15bHYgLnN0b3J5IC52YW4tZ3JpZC1pdGVtX19jb250ZW50ew0KICAgIGJhY2tncm91bmQ6ICNmZmY7DQogIH0NCiAgLm15bHYgLnN0b3J5IC5jb21tZW50TXNnew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIG1hcmdpbi10b3A6IDE1cHg7DQogIH0NCiAgLm15bHYgLnN0b3J5IC5jb21tZW50LXRpbWV7DQogICAgcGFkZGluZy1yaWdodDogMTVweDsNCiAgfQ0KICAubXlsdiAuc3RvcnkgLmNvbW1lbnQtSW1new0KICAgIHBhZGRpbmc6IDE1cHg7DQogIH0NCiAgLm15bHYgLnN0b3J5IC5jb21tZW50LUltZyBpbWd7DQogICAgYm9yZGVyOiAxcHggc29saWQgIzVBQkNDODsNCiAgfQ0KICAubXlsdiAuc3RvcnkgLmNvbW1lbnRNc2cgc3BhbnsNCiAgICBjb2xvcjogIzVBQkNDODsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCiAgfQ0KICAubXlsdiAuc3RvcnkgLmNvbW1lbnQtdGltZXsNCiAgICBmb250LXNpemU6IDE0cHg7DQogICAgY29sb3I6ICM5OTk7DQogIH0NCiAgLm15bHYgLnN0b3J5IC5jb21tZW50TXNnIGRpdnsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtd3JhcDogbm93cmFwOw0KICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgfQ0KICAubXlsdiAuc3RvcnkgLmNvbW1lbnQtY29udGVudHsNCiAgICBkaXNwbGF5OiBibG9jazsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgIG1hcmdpbjogMDsNCiAgICBwYWRkaW5nOiAxMHB4IDE1cHg7DQogICAgZm9udC1zaXplOiAxNnB4Ow0KICAgIGxpbmUtaGVpZ2h0OiAyNHB4Ow0KICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgfQ0KICAubXlsdiAuc3RvcnkgLmltZ0Jnew0KICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgd2lkdGg6IDEwMCU7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBmbGV4LXdyYXA6IHdyYXA7DQogIH0NCiAgLm15bHYgLnN0b3J5IC5pbWdCZyBkaXZ7DQogICAgd2lkdGg6IDUwJTsNCiAgfQ0K"},{"version":3,"sources":["Mylv.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqOA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Mylv.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"mylv\">\r\n    <!-- 头 -->\r\n        <div >\r\n        <van-nav-bar  class=\"head\" :title=\"art.journal_title\" fixed\r\n        left-text=\"\" >\r\n        <template #left>\r\n          <router-link to=\"/\">\r\n            <van-icon class=\"jian\" name=\"arrow-left\" size=\"24\"/>\r\n          </router-link>\r\n        </template>\r\n        \r\n        </van-nav-bar>\r\n        </div>\r\n\r\n         <!-- 文章开始 -->\r\n        <!-- 开头中间分隔内容 -->\r\n        <div class=\"topf\">\r\n          <div class=\"topf2\">\r\n          <van-grid direction=\"horizontal\" :column-num=\"1\">\r\n          <van-grid-item text=\"_____.Q&A._____\" />\r\n          </van-grid>\r\n          </div>\r\n          <van-grid direction=\"horizontal\" :column-num=\"1\">\r\n          <van-grid-item :text=\"`【`+ art.journal_title +`】`\" />\r\n          </van-grid>\r\n        </div> \r\n        <!-- 问题 -->\r\n        <!-- 第一篇 -->\r\n        <div class=\"story\">\r\n        <van-grid :border=\"false\" :column-num=\"1\">\r\n         <!-- <van-loading type=\"spinner\" /> -->\r\n            <!-- <van-image :src=\"'http://127.0.0.1:8888/avatar/' + art.avatar\" lazy-load/> -->\r\n             \r\n              <!-- <van-image src=\"http://127.0.0.1:8888/avatar/bf6d72c1-db6f-448b-8f1a-0a6c576ea115.jpg\" /> -->\r\n            \r\n            <!-- <van-loading type=\"spinner\" /> -->\r\n            <van-grid-item :text=\"art.content\" />\r\n            <div class=\"imgBg\">\r\n              <div v-for=\"(pic,index) of art.pics\" :key=\"index\">\r\n                <van-image :src=\"'http://127.0.0.1:8888/journal-pic/' + pic.picture_pic\"\r\n                lazy-load\r\n                width=\"99%\"\r\n                height=\"10rem\"\r\n                fit=\"cover\"\r\n                />\r\n              </div>\r\n            </div>\r\n        </van-grid>\r\n        </div>\r\n        <!-- 评价 -->\r\n            \r\n        \r\n        <!-- 评论区 -->\r\n        <div class=\"topf\">\r\n          <van-grid direction=\"horizontal\" :column-num=\"1\">\r\n          <van-grid-item text=\"----- 评论 -----\" />\r\n          </van-grid>\r\n        </div>\r\n\r\n        <!-- 用户评论 -->\r\n        <div class=\"comment_area\">\r\n          <form action=\"\">\r\n          <van-field\r\n          v-model=\"leme\"\r\n          colon\r\n          rows=\"3\"\r\n          autosize\r\n          label=\"留言\"\r\n          label-width=\"2.5em\"\r\n          type=\"textarea\"\r\n          maxlength=\"300\"\r\n          placeholder=\"请输入您留言吧！\"\r\n          show-word-limit\r\n          >\r\n          <template #button >\r\n            <van-button round square class=\"btn\" type=\"warning\" color=\"#5ABCC8\" @click=\"put\">发送</van-button>\r\n          </template>\r\n          </van-field>\r\n          </form>\r\n        </div>\r\n\r\n        <!-- 评论区 -->\r\n        <!-- 组件懒加载 -->\r\n        <lazy-component v-if=\"listLoading\">\r\n        <div class=\"story\" v-for=\"(item,index) of comments\" :key=\"index\">\r\n          <van-grid :border=\"false\" :column-num=\"1\">\r\n          <!-- 日志标题开始 -->\r\n          <div class=\"comment-header\">\r\n            <van-image :round=\"avatar\" width=\"3rem\" :src=\"'http://127.0.0.1:8888/avatar/'+ item.avatar\" fit=\"cover\" class=\"comment-Img\"/>\r\n            <div class=\"commentMsg\">\r\n              <div>\r\n                <span>{{item.nickname}}</span>\r\n                <!-- <h3 class=\"articleItem-time\">{{this.moment.unix(diary.log_time).format('Y年MM月DD日')}}</h3> -->\r\n                <h3 class=\"comment-time\">{{item.time/1000 | datefmt('YYYY-MM-DD')}}</h3>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <p class=\"comment-content\">{{item.comment}}</p>\r\n            <!-- <van-grid-item :text=\"item.comment\" /> -->\r\n          <!-- 日志标题结束 -->\r\n          </van-grid>\r\n        </div>\r\n        </lazy-component>\r\n\r\n        <!-- 分割线 -->\r\n        <van-divider dashed\r\n          :style=\"{ color: '#fff', borderColor: '#fff', padding: '0px 16px 16px' }\"\r\n        >\r\n          已经到底了\r\n        </van-divider>\r\n        <!-- <div class=\"putf\">\r\n          <van-button round type=\"info\" size=\"small\" color=\"#5ABCC8\" @click=\"put\">发送</van-button>\r\n        </div> -->\r\n  </div>\r\n  \r\n</template>\r\n\r\n<script>\r\nexport default {\r\n   data() {\r\n    return {\r\n      art:{},\r\n      value: 5,\r\n      leme:\"\",\r\n      // 空formdata\r\n      formdata: {},\r\n      // 当前日志id\r\n      jid:0,\r\n      // 当前用户\r\n      userPhone:this.$store.state.userPhone,\r\n      // 评论\r\n      comments:[],\r\n      // 头像显示\r\n      avatar:true,\r\n      listLoading:true\r\n    }\r\n  },\r\n  methods: {\r\n    // 头  \r\n    // onClickLeft() {\r\n    //   Toast('返回');\r\n    // },\r\n    // onClickRight() {\r\n    //   Toast('按钮');\r\n    // },\r\n\r\n    put(){\r\n      // let fromData = new FormData(); \r\n      //获取登录状态\r\n      let isOnlogin = this.$store.state.isOnlogin;\r\n\r\n      //验证登录\r\n      // 等于1登录\r\n      if(isOnlogin == 1){\r\n\r\n\r\n        //如果当前内容是空提交\r\n        if(!this.leme){\r\n          // this.$toast.fail('请输入评论再提交~~');\r\n          return\r\n\r\n        }else{ // 提交\r\n\r\n          // console.log(this.leme);\r\n          // 获取时间\r\n          let new_time = this.moment().format('x');\r\n          this.formdata.time = new_time;\r\n          \r\n          //如果填写就保存在formdata中\r\n          this.formdata.comment = this.leme;\r\n\r\n          // 获取当前日志id\r\n          this.formdata.journal_id = this.jid;\r\n\r\n          // 用户\r\n          this.formdata.phone = this.userPhone.phone;\r\n          this.listLoading = true;\r\n          //提交评论\r\n          this.axios.post('/journal/comment',this.formdata).then(res=>{\r\n            console.log(res.data);\r\n            if(res.data.code == 1){\r\n              this.$toast.success('评论成功');\r\n              this.leme = \"\";\r\n              this.getList( this.jid );\r\n              // this.reload();\r\n            }\r\n            this.listLoading = false;\r\n          })\r\n        }\r\n\r\n      } else { // 未登录\r\n\r\n        this.$toast.fail('请登录后发送');\r\n        // this.$router.push(\"/login\");\r\n      }\r\n     //\r\n\r\n    },\r\n    getList( id ){\r\n      this.listLoading = false;\r\n      this.axios.get('/journal/All_comments?id=' + id ).then(res=>{\r\n        this.comments = res.data.comments;\r\n        console.log(res.data.comments);\r\n        this.listLoading = true\r\n      })\r\n    }\r\n  },\r\n  mounted(){\r\n    \r\n    let id = this.$route.params.aid;\r\n    // 赋值给jid\r\n    this.jid = id;\r\n     //获取服务器穿的id值\r\n    this.axios.get('/journal/details?id='+id).then(res=>{\r\n      this.art=res.data.art;\r\n      console.log(res.data.art);\r\n    })\r\n\r\n    //评论\r\n//     this.axios.get('/journal/All_comments?id=' + id ).then(res=>{\r\n//       this.comments = res.data.comments;\r\n//       console.log(res.data.comments);\r\n//     })\r\n    this.getList( id );\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.mylv .topf{\r\n  margin-top: 16px;\r\n}\r\n.mylv .dian {\r\n    display: flex;\r\n    flex-direction: row;\r\n}\r\n\r\n#zan,\r\n#cai {\r\n    width: 55px;\r\n    height: 22px;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    background-color: #F3F3F3;\r\n    margin: 0 10px;\r\n    border-radius: 6px;\r\n    user-select: none;\r\n    cursor: pointer;\r\n}\r\n\r\n#zan img,\r\n#cai img {\r\n    width: 14px;\r\n    height: 14px;\r\n    margin: 5px 5px 0 5px;\r\n}\r\n\r\n#zan #num1,\r\n#cai #num2 {\r\n    line-height: 22px;\r\n    margin-right: 3px;\r\n}\r\n  .mylv .head{\r\n    background-color: #5ABCC8; \r\n  }\r\n .mylv .van-nav-bar__title {\r\n   padding-top:0.50rem;\r\n    color:aliceblue;\r\n    \r\n}\r\n.mylv .story .van-grid-item__text{\r\n  font-size: 16px;\r\n  text-indent: 2em;\r\n  line-height: 26px;\r\n}\r\n .mylv .van-nav-bar .zan{\r\n   padding-top:0.50rem;\r\n   color: aliceblue\r\n }\r\n .mylv .van-nav-bar .jian{\r\n   padding-top:0.75rem;\r\n   color: aliceblue\r\n }\r\n  .mylv{\r\n    background-color:lightsteelblue;\r\n  }\r\n  .mylv .story{\r\n    padding: 3% 3% 1%;\r\n    font-size:0.5em;\r\n  }\r\n  .mylv .story + .story{\r\n    padding: 1% 3% 1%;\r\n  }\r\n  .mylv .story van-image {\r\n    border-radius: 5%\r\n  }\r\n .mylv .topf .van-grid-item__text{\r\n    font-size: 20px; \r\n  }\r\n  .mylv .topf .topf2 .van-grid-item__content{\r\n    padding: 0% \r\n  }\r\n  .mylv .van-grid-item__content{\r\n    background-color:lavender;\r\n  }\r\n  .mylv .story .comment-header{\r\n    font-weight: 500;\r\n    font-size: 16px;\r\n    color: #1a1a1a;\r\n    line-height: 16px;\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n    background: #fff;\r\n    width: 100%;\r\n  }\r\n  .mylv .story .van-grid-item__content{\r\n    background: #fff;\r\n  }\r\n  .mylv .story .commentMsg{\r\n    width: 100%;\r\n    margin-top: 15px;\r\n  }\r\n  .mylv .story .comment-time{\r\n    padding-right: 15px;\r\n  }\r\n  .mylv .story .comment-Img{\r\n    padding: 15px;\r\n  }\r\n  .mylv .story .comment-Img img{\r\n    border: 1px solid #5ABCC8;\r\n  }\r\n  .mylv .story .commentMsg span{\r\n    color: #5ABCC8;\r\n    font-weight: bold;\r\n  }\r\n  .mylv .story .comment-time{\r\n    font-size: 14px;\r\n    color: #999;\r\n  }\r\n  .mylv .story .commentMsg div{\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n    justify-content: space-between;\r\n  }\r\n  .mylv .story .comment-content{\r\n    display: block;\r\n    width: 100%;\r\n    background: #fff;\r\n    margin: 0;\r\n    padding: 10px 15px;\r\n    font-size: 16px;\r\n    line-height: 24px;\r\n    font-size: 14px;\r\n  }\r\n  .mylv .story .imgBg{\r\n    background: #fff;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n  }\r\n  .mylv .story .imgBg div{\r\n    width: 50%;\r\n  }\r\n</style>\r\n"]}]}