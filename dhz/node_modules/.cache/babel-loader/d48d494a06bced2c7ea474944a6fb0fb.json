{"remainingRequest":"D:\\web\\web2007\\bcy\\team\\新建文件夹 (2)\\Travel-log\\dhz\\node_modules\\babel-loader\\lib\\index.js!D:\\web\\web2007\\bcy\\team\\新建文件夹 (2)\\Travel-log\\dhz\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\web\\web2007\\bcy\\team\\新建文件夹 (2)\\Travel-log\\dhz\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\web\\web2007\\bcy\\team\\新建文件夹 (2)\\Travel-log\\dhz\\src\\views\\KeepDiary.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\web\\web2007\\bcy\\team\\新建文件夹 (2)\\Travel-log\\dhz\\src\\views\\KeepDiary.vue","mtime":1605946112138},{"path":"D:\\web\\web2007\\bcy\\team\\新建文件夹 (2)\\Travel-log\\dhz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605946099728},{"path":"D:\\web\\web2007\\bcy\\team\\新建文件夹 (2)\\Travel-log\\dhz\\node_modules\\babel-loader\\lib\\index.js","mtime":1605946099449},{"path":"D:\\web\\web2007\\bcy\\team\\新建文件夹 (2)\\Travel-log\\dhz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605946099728},{"path":"D:\\web\\web2007\\bcy\\team\\新建文件夹 (2)\\Travel-log\\dhz\\node_modules\\vue-loader\\lib\\index.js","mtime":1605946110898}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDmlofnq6DmraPmlocKICAgICAgYXJ0aWNsZTogIiIsCiAgICAgIC8vIOaWh+eroOagh+mimAogICAgICBhcnRpY2xlX3RpdDogIiIsCiAgICAgIC8vIOS4iuS8oOeahOWbvueJhwogICAgICBmaWxlTGlzdDogW10sCiAgICAgIC8vIOW9k+WJjeWfjuW4ggogICAgICBjdXJyZW50X2NpdHk6ICIiLAogICAgICBjaXR5OiBbJ+adreW3nicsICflroHms6InLCAn5rip5beeJywgJ+WYieWFtCcsICfmuZblt54nXSwKICAgICAgc2hvd2NpdHk6IGZhbHNlLAogICAgICAvLyDmlofnq6DliIbnsbsKICAgICAgY2xhc3NpZnk6ICIiLAogICAgICBkaWFyeWNsYXNzaWZ5OiBbXSwKICAgICAgc2hvd2NsYXNzaWZ5OiBmYWxzZSwKICAgICAgLy8g5piv5ZCm5LiK5LygCiAgICAgIGRhdGE6IHt9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5Zu+54mH6K+75Y+W5ZCO55qE5Y+C5pWwCiAgICBhZnRlclJlYWQ6IGZ1bmN0aW9uIGFmdGVyUmVhZChmaWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKGZpbGUpOyAvLyDliJvlu7rooajljZXmlbDmja7lr7nosaEKCiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOyAvLyDlpoLmnpzkvKDnmoTlj4LnmoRjb250ZW505bGe5oCn5a2Y5Zyo5YiZ5Li65a+56LGhCgogICAgICBpZiAoZmlsZS5oYXNPd25Qcm9wZXJ0eSgnY29udGVudCcpKSB7CiAgICAgICAgLy8g55u05o6l5L+d5a2Y5YiwZGF0YeS4rQogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnam91cm5hbF9waWMnLCBmaWxlKTsgLy8g5L+d5a2Y5Zyo5Y+Y6YePZGF0YeS4rQoKICAgICAgICB0aGlzLmRhdGEgPSBmb3JtRGF0YTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvL+WQpuWImeS4uuaVsOe7hAogICAgICAgIC8vIOW+queOr+mBjeWOhuiOt+WPlgogICAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gZmlsZS5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIC8v6I635Y+W5YiwRmlsZeWvueixoQogICAgICAgICAgdmFyIGZpbGVzID0gZmlsZVtpXS5maWxlOyAvLyBjb25zb2xlLmxvZyhmaWxlW2ldLmZpbGUpOwoKICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnam91cm5hbF9waWMnLCBmaWxlcyk7CiAgICAgICAgfSAvLyDkv53lrZjlnKjlj5jph49kYXRh5LitCgoKICAgICAgICB0aGlzLmRhdGEgPSBmb3JtRGF0YTsKICAgICAgfQogICAgfSwKICAgIC8vIOWfjuW4gumAieaLqeWZqAogICAgb25jaXR5OiBmdW5jdGlvbiBvbmNpdHkodmFsdWUpIHsKICAgICAgdGhpcy5jdXJyZW50X2NpdHkgPSB2YWx1ZTsKICAgICAgdGhpcy5zaG93Y2l0eSA9IGZhbHNlOwogICAgfSwKICAgIC8vIOWIhuexu+eahOmAieaLqeWZqAogICAgb25jbGFzc2lmeTogZnVuY3Rpb24gb25jbGFzc2lmeSh2YWx1ZSkgewogICAgICB0aGlzLmNsYXNzaWZ5ID0gdmFsdWU7CiAgICAgIHRoaXMuc2hvd2NsYXNzaWZ5ID0gZmFsc2U7CiAgICB9LAogICAgLy8g5Y+R5biD5pel5b+XCiAgICByZWxlYXNlOiBmdW5jdGlvbiByZWxlYXNlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8g6I635Y+W5b2T5YmN5pe26Ze0CiAgICAgIHZhciBjdXJyZW50X3RpbWUgPSB0aGlzLm1vbWVudCgpLmZvcm1hdCgnWCcpOyAvLyDlo7DmmI7kuIDkuKrlj5jph4/kv53lrZjlr7nlupTnmoTliIbnsbtpZAoKICAgICAgdmFyIGNsYXNzaWZ5X2lkOyAvLyDkv53lrZjojrflj5bnmoTliIbnsbvmlbDnu4QKCiAgICAgIHZhciBjbGFzc2lmeV9hcnIgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jbGFzc2lmeTsgLy8g5b6q546v5YiG57G75pWw57uECgogICAgICBjbGFzc2lmeV9hcnIuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBhcnJheSkgewogICAgICAgIC8vIOWmguaenOmAieS4reaWh+eroOWIhuexu+WQjeetieS6juWIhuexu+aVsOe7hOmHjOeahOWQjQogICAgICAgIGlmIChfdGhpcy5jbGFzc2lmeSA9PSB2YWx1ZS5jbGFzc2lmeSkgewogICAgICAgICAgLy8g5bCx5bCG5b2T5YmNaWTotYvlgLznu5ljbGFzc2lmeV9pZAogICAgICAgICAgY2xhc3NpZnlfaWQgPSB2YWx1ZS5jaWQ7CiAgICAgICAgfQogICAgICB9KTsgLy8g5b2T5LuA5LmI6YO95rKh5rKh5YaZ5pe25LiN5YWB6K645o+Q5LqkCgogICAgICBpZiAoIXRoaXMuYXJ0aWNsZV90aXQgfHwgIXRoaXMuYXJ0aWNsZSB8fCAhdGhpcy5jdXJyZW50X2NpdHkgfHwgIXRoaXMuY2xhc3NpZnkpIHsKICAgICAgICAvLyDmsqHlhpnkuJzopb/msqHmnInliqjkvZwKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5YaZ5LqG5Lic6KW/CiAgICAgICAgLy8g6I635Y+W5L+d5a2Y55qEZm9ybWRhdGEKICAgICAgICB2YXIgZm9ybURhdGEgPSB0aGlzLmRhdGE7IC8vIOWcqOihqOWNleaVsOaNruWvueixoeS4rea3u+WKoOaVsOaNrgogICAgICAgIC8vIOaXpeW/l+agh+mimAoKICAgICAgICBmb3JtRGF0YS5zZXQoImpvdXJuYWxfdGl0bGUiLCB0aGlzLmFydGljbGVfdGl0KTsgLy8g5pel5b+X5q2j5paHCgogICAgICAgIGZvcm1EYXRhLnNldCgiY29udGVudCIsIHRoaXMuYXJ0aWNsZSk7IC8vIOWPkeW4g+aXtumXtAoKICAgICAgICBmb3JtRGF0YS5zZXQoImxvZ190aW1lIiwgY3VycmVudF90aW1lKTsgLy8g5b2T5YmN5Z+O5biCCgogICAgICAgIGZvcm1EYXRhLnNldCgiam91cm5hbF9jaXR5IiwgdGhpcy5jdXJyZW50X2NpdHkpOyAvLyDlvZPliY3liIbnsbsKCiAgICAgICAgZm9ybURhdGEuc2V0KCJqb3VybmFsX2NsYXNzaWZ5IiwgY2xhc3NpZnlfaWQpOyAvLyDnlKjmiLdpZAoKICAgICAgICBmb3JtRGF0YS5zZXQoInVzZXJzX2lkIiwgMSk7CiAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpOyAvLyDmj5DkuqTooajljZUKCiAgICAgICAgdGhpcy5heGlvcy5wb3N0KCcvam91cm5hbC9kaWFyeWFkZCcsIGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIC8vIOiOt+WPluWIsGNvZGXkuLox6Lez6L2s5Yiw6aaW6aG1CiAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAxKSB7CiAgICAgICAgICAgIF90aGlzLiRub3RpZnkoJ+WPkeW4g+aIkOWKnycpOwoKICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvJyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAvLyDliIbnsbvpgInmi6nlmajojrflj5bmlbDmja7mlbDnu4QKICAgIHZhciBjbGFzc2lmeXMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jbGFzc2lmeTsKICAgIGNsYXNzaWZ5cy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGFycmF5KSB7CiAgICAgIF90aGlzMi5kaWFyeWNsYXNzaWZ5LnB1c2godmFsdWUuY2xhc3NpZnkpOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["KeepDiary.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"keepDiary\">\r\n    <!-- 导航栏 -->\r\n    <van-nav-bar title=\"发布日志\" left-arrow fixed border class=\"navb\">\r\n      <template #left>\r\n        <router-link to=\"/\">\r\n          <van-icon name=\"arrow-left\" color=\"#000\" size=\"24\"  /> \r\n        </router-link>\r\n      </template>\r\n      <template #right>\r\n        <van-button round type=\"info\" size=\"small\" color=\"#5ABCC8\" @click=\"release\">发布</van-button>\r\n      </template>\r\n    </van-nav-bar>\r\n    <!-- 导航栏结束 -->\r\n\r\n    <!-- 正文开始 -->\r\n    <div class=\"diarytext\">\r\n      <van-field\r\n        v-model=\"article\"\r\n        rows=\"8\"\r\n        type=\"textarea\"\r\n        maxlength=\"3000\"\r\n        placeholder=\"随手分享下你的旅行日志吧！\"\r\n        show-word-limit\r\n      />\r\n    </div>\r\n    <!-- 正文结束 -->\r\n    <!-- 图片上传开始 -->\r\n    <div class=\"picUpload\">\r\n      <van-uploader v-model=\"fileList\" multiple :max-count=\"8\" :after-read=\"afterRead\" accept=\"image/png,image/jpeg,image/jpg\"/>\r\n    </div>\r\n    <!-- 图片上传结束 -->\r\n    <!-- 标题开始 -->\r\n    <van-cell-group>\r\n      <van-field v-model=\"article_tit\" label=\"文章标题\" placeholder=\"请填写文章标题\" label-width=\"4.2em\"/>\r\n    </van-cell-group>\r\n    <!-- 标题结束 -->\r\n    <!-- 城市位置开始 -->\r\n    <van-cell-group>\r\n      <van-field\r\n        readonly\r\n        clickable\r\n        name=\"current_city\"\r\n        :value=\"current_city\"\r\n        label=\"当前城市\"\r\n        label-width=\"4.2em\"\r\n        placeholder=\"点击选择城市\"\r\n        @click=\"showcity = true\"\r\n      />\r\n      <van-popup v-model=\"showcity\" position=\"bottom\">\r\n        <van-picker\r\n          show-toolbar\r\n          :columns=\"city\"\r\n          @confirm=\"oncity\"\r\n          @cancel=\"showcity = false\"\r\n        />\r\n      </van-popup>\r\n    </van-cell-group>\r\n    <!-- 城市位置结束 -->\r\n    <!-- 文章分类开始 -->\r\n    <van-cell-group>\r\n      <van-field\r\n        readonly\r\n        clickable\r\n        name=\"classify\"\r\n        :value=\"classify\"\r\n        label=\"文章分类\"\r\n        label-width=\"4.2em\"\r\n        placeholder=\"点击选择分类\"\r\n        @click=\"showclassify = true\"\r\n      />\r\n      <van-popup v-model=\"showclassify\" position=\"bottom\">\r\n        <van-picker\r\n          show-toolbar\r\n          :columns=\"diaryclassify\"\r\n          @confirm=\"onclassify\"\r\n          @cancel=\"showclassify = false\"\r\n        />\r\n      </van-popup>\r\n    </van-cell-group>\r\n    <!-- 文章分类结束 -->\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n/* 导航按钮 */\r\n.keepDiary .van-button--round{\r\n  border-radius: 50px;\r\n  height: 24px;\r\n}\r\n.keepDiary .van-nav-bar__left, .van-nav-bar__right{\r\n  font-size: 24px;\r\n}\r\n/* 正文 */\r\n.keepDiary .diarytext{\r\n  margin-top: 46px;\r\n}\r\n.keepDiary .diarytext .van-cell{\r\n  padding: 0;\r\n}\r\n.keepDiary .diarytext .van-cell__value--alone{\r\n  background: rgb(250, 250, 250);\r\n  padding: 15px;\r\n}\r\n.keepDiary .diarytext .van-field__control{\r\n  text-indent:2em;\r\n}\r\n/* 图片上传 */\r\n.keepDiary .picUpload{\r\n  margin-left: 8px;\r\n  margin-top: 8px;\r\n}\r\n/* 当前城市 */\r\n.keepDiary .current_city{\r\n  border-top: 1px solid rgb(250, 250, 250);\r\n  border-bottom: 1px solid rgb(250, 250, 250);\r\n}\r\n</style>\r\n\r\n<script>\r\nexport default {\r\n  data(){\r\n    return {\r\n      // 文章正文\r\n      article:\"\",\r\n      // 文章标题\r\n      article_tit:\"\",\r\n      // 上传的图片\r\n      fileList: [],\r\n      // 当前城市\r\n      current_city:\"\",\r\n      city: ['杭州', '宁波', '温州', '嘉兴', '湖州'],\r\n      showcity: false,\r\n\r\n      // 文章分类\r\n      classify:\"\",\r\n      diaryclassify:[],\r\n      showclassify: false,\r\n      // 是否上传\r\n      data:{}\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取图片读取后的参数\r\n    afterRead(file) {\r\n      console.log(file);\r\n      // 创建表单数据对象\r\n      let formData = new FormData();\r\n      // 如果传的参的content属性存在则为对象\r\n      if (file.hasOwnProperty('content')) {\r\n\r\n        // 直接保存到data中\r\n        formData.append('journal_pic',file);\r\n        // 保存在变量data中\r\n        this.data = formData;\r\n\r\n      } else {//否则为数组\r\n\r\n        // 循环遍历获取\r\n        for (let i = 0, n = file.length; i < n; i++) {\r\n          //获取到File对象\r\n          let files = file[i].file;\r\n          // console.log(file[i].file);\r\n          formData.append('journal_pic',files);\r\n        }\r\n        // 保存在变量data中\r\n        this.data = formData;\r\n\r\n      }\r\n    },\r\n\r\n    \r\n    // 城市选择器\r\n    oncity(value) {\r\n      this.current_city = value;\r\n      this.showcity = false;\r\n    },\r\n    // 分类的选择器\r\n    onclassify(value){\r\n      this.classify = value;\r\n      this.showclassify = false;\r\n    },\r\n    // 发布日志\r\n    release(){\r\n      // 获取当前时间\r\n      let current_time = this.moment().format('X');\r\n\r\n\r\n      // 声明一个变量保存对应的分类id\r\n      let classify_id;\r\n      // 保存获取的分类数组\r\n      let classify_arr = this.$store.state.classify;\r\n      // 循环分类数组\r\n      classify_arr.forEach((value, index, array) => {\r\n        // 如果选中文章分类名等于分类数组里的名\r\n        if ( this.classify ==  value.classify) {\r\n          // 就将当前id赋值给classify_id\r\n          classify_id = value.cid\r\n        }\r\n      })\r\n\r\n\r\n      // 当什么都没没写时不允许提交\r\n      if ( !this.article_tit || !this.article || !this.current_city || !this.classify ) {\r\n        // 没写东西没有动作\r\n        return\r\n\r\n      } else { // 写了东西\r\n\r\n          // 获取保存的formdata\r\n          let formData = this.data;\r\n  \r\n          // 在表单数据对象中添加数据\r\n          // 日志标题\r\n          formData.set(\"journal_title\",this.article_tit);\r\n          // 日志正文\r\n          formData.set(\"content\",this.article);\r\n          // 发布时间\r\n          formData.set(\"log_time\",current_time);\r\n          // 当前城市\r\n          formData.set(\"journal_city\",this.current_city);\r\n          // 当前分类\r\n          formData.set(\"journal_classify\",classify_id);\r\n          // 用户id\r\n          formData.set(\"users_id\",1);\r\n\r\n          console.log(formData);\r\n          // 提交表单\r\n          this.axios.post('/journal/diaryadd',formData).then( res => {\r\n            // 获取到code为1跳转到首页\r\n            if (res.data.code == 1) {\r\n              this.$notify('发布成功');\r\n              this.$router.push('/');\r\n            }\r\n\r\n          })\r\n      }\r\n    }\r\n  },\r\n  mounted(){\r\n    // 分类选择器获取数据数组\r\n    let classifys = this.$store.state.classify;\r\n    classifys.forEach((value, index, array) => {\r\n      this.diaryclassify.push(value.classify)\r\n    })\r\n\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views"}]}